{"version":3,"file":"blaze.js","sourceRoot":"","sources":["blaze.ts"],"names":["load_yaml","load_json","load_yaml_collection","validate_rules","SchemaRoot","SchemaRoot.constructor","SchemaRoot.parse","AccessEntry","AccessEntry.constructor","AccessEntry.parse","AccessEntry.match","AccessEntry.isChildOf","AccessEntry.matchSegment","AccessEntry.getReadFor","AccessEntry.getWriteFor","Access","Access.constructor","Access.parse","Access.getChildren","Rules","Rules.constructor","Rules.parse","Rules.inflateSchema","Rules.inflateSchemaRecursive"],"mappings":"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"}